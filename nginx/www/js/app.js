(function(e){function t(t){for(var r,o,l=t[0],s=t[1],u=t[2],f=0,h=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);c&&c(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0431":function(e,t,a){"use strict";var r=a("f76b"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=a("5c96"),i=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("player")],1)},l=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"player"}},[a("el-main",[a("el-row",[a("el-col",{attrs:{lg:{span:12,offset:6},md:{span:16,offset:4}}},[a("el-tabs",{attrs:{value:e.defaultTab},on:{"tab-click":e.handleClick}},e._l(e.tabs,(function(e,t){return a("el-tab-pane",{key:t,attrs:{name:t,label:e.name}})})),1),e.tabs[e.currentTab]||e.tabs[e.defaultTab]?a(e.tabs[e.currentTab]||e.tabs[e.defaultTab],{tag:"component"}):e._e()],1)],1)],1)],1)},u=[],c=(a("7f7f"),a("ac6a"),a("456d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"flv-js-player"}},[a("el-form",{attrs:{model:e.mediaDataSource,disabled:!e.supported},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{model:{value:e.mediaDataSource.url,callback:function(t){e.$set(e.mediaDataSource,"url",t)},expression:"mediaDataSource.url"}})],1),a("el-form-item",[a("el-checkbox",{attrs:{label:"isLive"},model:{value:e.mediaDataSource.isLive,callback:function(t){e.$set(e.mediaDataSource,"isLive",t)},expression:"mediaDataSource.isLive"}}),a("el-checkbox",{attrs:{label:"hasAudio"},model:{value:e.mediaDataSource.hasAudio,callback:function(t){e.$set(e.mediaDataSource,"hasAudio",t)},expression:"mediaDataSource.hasAudio"}}),a("el-checkbox",{attrs:{label:"hasVideo"},model:{value:e.mediaDataSource.hasVideo,callback:function(t){e.$set(e.mediaDataSource,"hasVideo",t)},expression:"mediaDataSource.hasVideo"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.load}},[e._v("LOAD")]),a("el-button",{attrs:{size:"mini"},on:{click:e.start}},[e._v("START")]),a("el-button",{attrs:{size:"mini"},on:{click:e.pause}},[e._v("PAUSE")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.destroy}},[e._v("DESTROY")])],1),a("el-form-item",[e._v("\n      Current buffer length: "+e._s(e.poorestHealth.toFixed(3))+"s\n    ")])],1),a("video",e._b({ref:"video",on:{timeupdate:e.onTimeUpdate}},"video",e.mappedMediaDataSource.isLive?{}:{controls:""},!1))],1)}),f=[],h=(a("8e6e"),a("75fc")),p=a("bd86"),d=a("1947");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(p["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={name:"flv-js",watch:{"mediaDataSource.url":function(e){try{localStorage.setItem("flv-js.mediaDataSource.url",e)}catch(t){console.log(t)}}},methods:{loadLocalMediaDataSource:function(){try{var e=localStorage.getItem("flv-js.mediaDataSource.url");null!==e&&(this.mediaDataSource.url=e)}catch(t){console.log(t)}},load:function(){this.bufferHealth=[],this.playbackRate=1,this.player&&this.destroy(),this.player=d["a"].createPlayer(m({},this.mappedMediaDataSource)),this.player.attachMediaElement(this.$refs.video),this.player.load(),this.bindEvents()},bindEvents:function(){this.player.on("error",this.destroy),this.player.on("statistics_info",(function(){}))},start:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},destroy:function(){this.player&&(this.player.pause(),this.player.unload(),this.player.detachMediaElement(),this.player.destroy(),this.player=null)},onTimeUpdate:function(){if(this.mappedMediaDataSource.isLive){var e=this.$refs.video;if(e&&!e.paused&&e.buffered&&0!==e.buffered.length){var t,a=e.currentTime,r=e.buffered.end(e.buffered.length-1),n=r-a,i=Math.floor(Date.now()/500);this.bufferHealth.length&&this.bufferHealth[this.bufferHealth.length-1].periodId===i?t=this.bufferHealth[this.bufferHealth.length-1]:(t={periodId:i,min:n},this.bufferHealth.push(t)),t.min=Math.min(t.min,n),this.bufferHealth.length>this.bufferHealthRecordSize&&this.bufferHealth.shift(),this.bufferHealth.length<this.bufferHealthRecordSize||(this.poorestHealth>2*this.bufferHealthHighWaterMark?e.currentTime=e.currentTime+(this.poorestHealth-this.bufferHealthTarget):this.poorestHealth>this.bufferHealthHighWaterMark?1===this.playbackRate&&(this.playbackRate=e.playbackRate=1.05):this.poorestHealth<this.bufferHealthTarget&&this.playbackRate>1&&(this.playbackRate=e.playbackRate=1))}}}},data:function(){var e=location.protocol+"//"+location.hostname+":"+location.port;return{supported:!1,player:null,mediaDataSource:{type:"flv",isLive:!0,url:e+"/live?app=demo&stream=stream-1",hasAudio:!0,hasVideo:!0},bufferHealthRecordSize:10,bufferHealth:[],bufferHealthHighWaterMark:2,bufferHealthTarget:.8,playbackRate:1}},computed:{mappedMediaDataSource:function(){return m({},this.mediaDataSource,{},this.mediaDataSource.isLive?{enableStashBuffer:!1,stashInitialSize:128,enableWorker:!0}:{})},poorestHealth:function(){return Math.min.apply(Math,Object(h["a"])(this.bufferHealth.map((function(e){return e.min}))))}},mounted:function(){this.supported=d["a"].isSupported(),this.loadLocalMediaDataSource()},beforeDestroy:function(){this.destroy()}},v=y,S=(a("0431"),a("2877")),g=Object(S["a"])(v,c,f,!1,null,null,null),O=g.exports,D={name:"player",components:{FlvJs:O},computed:{defaultTab:function(){return Object.keys(this.tabs).length?Object.keys(this.tabs)[0]:null}},methods:{handleClick:function(e){this.currentTab=e.name}},data:function(){return{tabs:{FlvJs:O},currentTab:null}}},k=D,j=Object(S["a"])(k,s,u,!1,null,null,null),H=j.exports,T={name:"app",components:{Player:H}},_=T,w=(a("5c0b"),Object(S["a"])(_,o,l,!1,null,null,null)),M=w.exports;a("a41b");r["default"].config.productionTip=!0,r["default"].use(i.a),new r["default"]({render:function(e){return e(M)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var r=a("e332"),n=a.n(r);n.a},a41b:function(e,t,a){},e332:function(e,t,a){},f76b:function(e,t,a){}});
//# sourceMappingURL=app.js.map